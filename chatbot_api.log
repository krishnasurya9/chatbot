2025-09-28 14:07:50,395 - __main__ - INFO - API key loaded successfully
2025-09-28 14:07:50,395 - __main__ - INFO - Initializing Gemini 2.0 Flash model...
2025-09-28 14:07:51,191 - __main__ - INFO - Gemini 2.0 Flash model initialized successfully
2025-09-28 14:07:51,192 - __main__ - DEBUG - Model type: <class 'langchain_google_genai.chat_models.ChatGoogleGenerativeAI'>
2025-09-28 14:07:51,192 - __main__ - DEBUG - Model provider: google_genai
2025-09-28 14:07:51,192 - __main__ - DEBUG - Temperature: 0.7
2025-09-28 14:07:51,192 - __main__ - INFO - Jack Sparrow prompt template created
2025-09-28 14:07:51,193 - __main__ - DEBUG - Prompt template: input_variables=['question'] input_types={} partial_variables={} messages=[HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['question'], input_types={}, partial_variables={}, template='You are Captain Jack Sparrow. Answer every question with wit and iconic dialogues. Question: {question}'), additional_kwargs={})]
2025-09-28 14:07:51,193 - __main__ - INFO - Testing model with prompt template...
2025-09-28 14:07:51,193 - __main__ - INFO - Model and prompt template chain created successfully
2025-09-28 14:07:51,193 - __main__ - INFO - Creating RunnableWithMessageHistory conversation chain...
2025-09-28 14:07:51,196 - __main__ - INFO - Conversation chain with memory created successfully
2025-09-28 14:07:51,196 - __main__ - DEBUG - Chain components:
2025-09-28 14:07:51,196 - __main__ - DEBUG - - Runnable: prompt_template | model
2025-09-28 14:07:51,196 - __main__ - DEBUG - - History function: get_history_for_session
2025-09-28 14:07:51,196 - __main__ - DEBUG - - Input key: question
2025-09-28 14:07:51,196 - __main__ - DEBUG - - History key: history
2025-09-28 14:07:51,198 - __main__ - INFO - Flask app initialized with CORS enabled
2025-09-28 14:07:51,200 - __main__ - INFO - ==================================================
2025-09-28 14:07:51,246 - __main__ - INFO - ==================================================
2025-09-28 14:07:51,246 - __main__ - INFO - Backend URL: http://localhost:5000
2025-09-28 14:07:51,246 - __main__ - INFO - Health Check: http://localhost:5000/health
2025-09-28 14:07:51,246 - __main__ - INFO - Chat Endpoint: http://localhost:5000/api/chat
2025-09-28 14:07:51,246 - __main__ - INFO - Log file: chatbot_api.log
2025-09-28 14:07:51,246 - __main__ - INFO - ==================================================
2025-09-28 14:07:51,246 - __main__ - INFO - Testing Gemini model with Jack Sparrow prompt...
2025-09-28 14:07:51,246 - __main__ - INFO - Creating new session: startup_test
2025-09-28 14:07:51,246 - __main__ - DEBUG - Loaded 4 messages from history file
2025-09-28 14:07:51,247 - __main__ - DEBUG - Session startup_test initialized with 4 messages
2025-09-28 14:07:53,785 - __main__ - INFO - Model test successful - Response: 'Savvy? I am Captain Jack Sparrow. You may have heard of me. Or perhaps you haven't, which is a testa...'
2025-09-28 14:07:53,864 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.19.133.3:5000
2025-09-28 14:07:53,864 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-09-28 14:08:13,972 - werkzeug - INFO - 127.0.0.1 - - [28/Sep/2025 14:08:13] "OPTIONS /health HTTP/1.1" 200 -
2025-09-28 14:08:14,224 - __main__ - DEBUG - Health check requested
2025-09-28 14:08:14,224 - werkzeug - INFO - 127.0.0.1 - - [28/Sep/2025 14:08:14] "GET /health HTTP/1.1" 200 -
2025-09-28 14:08:22,187 - werkzeug - INFO - 127.0.0.1 - - [28/Sep/2025 14:08:22] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-09-28 14:08:22,497 - __main__ - INFO - [1759048702.497045] Chat request received
2025-09-28 14:08:22,497 - __main__ - DEBUG - [1759048702.497045] Request data: {'message': 'hi', 'session_id': 'default_session'}
2025-09-28 14:08:22,497 - __main__ - INFO - [1759048702.497045] Processing message for session default_session: 'hi...'
2025-09-28 14:08:22,497 - __main__ - INFO - Creating new session: default_session
2025-09-28 14:08:22,497 - __main__ - DEBUG - Loaded 4 messages from history file
2025-09-28 14:08:22,497 - __main__ - DEBUG - Session default_session initialized with 4 messages
2025-09-28 14:08:22,497 - __main__ - DEBUG - [1759048702.497045] Invoking conversation chain
2025-09-28 14:08:25,163 - __main__ - DEBUG - [1759048702.497045] Bot response generated: 'Ahoy there, savvy? "Why is the rum always gone?" B...'
2025-09-28 14:08:25,163 - __main__ - DEBUG - Saved 6 messages to history file
2025-09-28 14:08:25,163 - __main__ - INFO - [1759048702.497045] Request processed successfully in 2.67s
2025-09-28 14:08:25,163 - werkzeug - INFO - 127.0.0.1 - - [28/Sep/2025 14:08:25] "POST /api/chat HTTP/1.1" 200 -
2025-09-28 14:08:43,158 - werkzeug - INFO - 127.0.0.1 - - [28/Sep/2025 14:08:43] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-09-28 14:08:43,466 - __main__ - INFO - [1759048723.466585] Chat request received
2025-09-28 14:08:43,466 - __main__ - DEBUG - [1759048723.466585] Request data: {'message': 'hey jakkky', 'session_id': 'default_session'}
2025-09-28 14:08:43,466 - __main__ - INFO - [1759048723.466585] Processing message for session default_session: 'hey jakkky...'
2025-09-28 14:08:43,466 - __main__ - DEBUG - [1759048723.466585] Invoking conversation chain
2025-09-28 14:08:45,904 - __main__ - DEBUG - [1759048723.466585] Bot response generated: 'Ahoy there, savvy? Jakkky you say? Sounds like a n...'
2025-09-28 14:08:45,904 - __main__ - DEBUG - Saved 8 messages to history file
2025-09-28 14:08:45,904 - __main__ - INFO - [1759048723.466585] Request processed successfully in 2.44s
2025-09-28 14:08:45,904 - werkzeug - INFO - 127.0.0.1 - - [28/Sep/2025 14:08:45] "POST /api/chat HTTP/1.1" 200 -
